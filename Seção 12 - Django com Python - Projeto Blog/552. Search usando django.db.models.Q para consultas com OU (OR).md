# Passo a passo — Criar busca (search) no Django

1. **Criar view para busca**

   * Crie uma view `search` que vai listar posts, sem precisar de paginação.
   * Receba o valor da busca (`search`) via `request.GET`:

     ```python
     search_query = request.GET.get('search', '').strip()
     ```

2. **Filtrar posts pelo título ou conteúdo**

   * Importe `Q` do Django:

     ```python
     from django.db.models import Q
     ```
   * Faça a consulta usando `Q` com operador OR (`|`):

     ```python
     results = Post.objects.filter(
         Q(title__icontains=search_query) | Q(content__icontains=search_query) | Q(excerpt__icontains=search_query)
     )[:max_results]  # limitar resultados se necessário
     ```

3. **Criar URL para busca**

   * No `urls.py`, adicione:

     ```python
     path('blog/search/', views.search, name='search')
     ```

4. **Criar formulário no template**

   * Formulário simples com input `search` apontando para a URL da busca:

     ```html
     <form action="{% url 'search' %}" method="get">
         <input type="text" name="search" placeholder="Buscar...">
         <button type="submit">Buscar</button>
     </form>
     ```

5. **Exibir resultados no template**

   * No template, faça loop sobre os resultados:

     ```django
     {% if results %}
         {% for post in results %}
             <h2>{{ post.title }}</h2>
             <p>{{ post.excerpt }}</p>
         {% endfor %}
     {% else %}
         <p>Nenhum post encontrado.</p>
     {% endif %}
     ```

6. **Tratar casos especiais**

   * Remover espaços extras no input (`strip()`).
   * Garantir que a busca seja case-insensitive (`icontains`).
   * Se não houver resultados, exibir mensagem apropriada.

7. **Testar funcionalidade**

   * Buscar por títulos ou trechos existentes.
   * Buscar com espaços antes/depois.
   * Buscar termos que não existam para conferir mensagem de “nada encontrado”.

Isso cria uma busca funcional que filtra posts pelo título, conteúdo ou excerto e exibe os resultados sem paginação.
