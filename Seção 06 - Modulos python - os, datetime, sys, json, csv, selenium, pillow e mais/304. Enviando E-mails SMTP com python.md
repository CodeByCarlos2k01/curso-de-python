# Passo a passo — Enviar e-mail HTML com Python (via SMTP/Gmail)

1. **Instale a dependência**

   ```bash
   pip install python-dotenv
   ```

2. **Crie o arquivo `.env` (e *não* faça commit)**

   ```dotenv
   FROM_EMAIL=seu-email@gmail.com
   EMAIL_PASSWORD=senha-de-app-16-chars  # senha de app do Gmail
   TO_EMAIL=destinatario@exemplo.com
   SMTP_HOST=smtp.gmail.com
   SMTP_PORT=587
   ```

   Dica: mantenha um `.env.example` com valores “changeme”.

3. **Crie o HTML do e-mail (ex.: `aula185.html`)**

   ```html
   <p>Olá ${nome},</p>
   <p>Estou testando este e-mail em <em>HTML</em>.</p>
   <p>Atenciosamente,<br>Luiz Otávio</p>
   ```

4. **Código Python para montar e enviar**

   ```python
   from dotenv import load_dotenv
   import os, smtplib
   from pathlib import Path
   from string import Template
   from email.mime.multipart import MIMEMultipart
   from email.mime.text import MIMEText

   load_dotenv()

   FROM_EMAIL = os.getenv("FROM_EMAIL", "")
   EMAIL_PASSWORD = os.getenv("EMAIL_PASSWORD", "")
   TO_EMAIL = os.getenv("TO_EMAIL", FROM_EMAIL)
   SMTP_HOST = os.getenv("SMTP_HOST", "smtp.gmail.com")
   SMTP_PORT = int(os.getenv("SMTP_PORT", "587"))

   # 1) Carrega e personaliza o HTML
   html_path = Path("aula185.html")
   html = html_path.read_text(encoding="utf-8")
   body = Template(html).substitute(nome="João")

   # 2) Monta a mensagem
   msg = MIMEMultipart("alternative")
   msg["From"] = FROM_EMAIL
   msg["To"] = TO_EMAIL
   msg["Subject"] = "Este é o assunto do e-mail"
   msg.attach(MIMEText(body, "html", "utf-8"))

   # 3) Envia via SMTP (TLS)
   with smtplib.SMTP(SMTP_HOST, SMTP_PORT) as server:
       server.ehlo()
       server.starttls()
       server.login(FROM_EMAIL, EMAIL_PASSWORD)
       server.send_message(msg)

   print("E-mail enviado com sucesso!")
   ```

5. **Checklist rápido**

   * Gmail: use **senha de app** e 2FA ativada.
   * Host correto: **`smtp.gmail.com`** (não `smtp.google.com`).
   * Porta: **587** (TLS/StartTLS).
   * Coloque `.env` no `.gitignore`.
   * Para outro provedor SMTP, altere `SMTP_HOST`, `SMTP_PORT`, `FROM_EMAIL` e a senha conforme o serviço.
