# Passo a passo (simplificado)

1. **Defina `per_page`** (quantos posts por página)

   ```py
   # blog/views.py (ou no topo do arquivo)
   PER_PAGE = 9
   ```

2. **Query dos posts publicados e paginação (view da index)**

   ```py
   from django.shortcuts import render
   from django.core.paginator import Paginator
   from .models import Post

   def index(request):
       posts = Post.objects.filter(is_published=True).order_by('-pk')
       paginator = Paginator(posts, PER_PAGE)
       page_number = request.GET.get('page')
       page_obj = paginator.get_page(page_number)   # get_page já trata page inválida
       return render(request, 'blog/index.html', {'page_object': page_obj})
   ```

3. **Crie a URL do detalhe do post usando `slug`**

   ```py
   # blog/urls.py
   from django.urls import path
   from . import views

   app_name = 'blog'

   urlpatterns = [
       path('', views.index, name='index'),
       path('post/<slug:slug>/', views.post_detail, name='post'),
   ]
   ```

4. **View do detalhe (buscar por slug, só publicado)**

   ```py
   from django.shortcuts import get_object_or_404, render

   def post_detail(request, slug):
       post = get_object_or_404(Post, slug=slug, is_published=True)
       return render(request, 'blog/post.html', {'post': post})
   ```

5. **Template: iterar `page_object` na index**

   ```django
   {# blog/templates/blog/index.html #}
   {% for post in page_object %}
     <article class="post-card">
       {% if post.cover %}
         <a href="{% url 'blog:post' post.slug %}">
           <img src="{{ post.cover.url }}" alt="{{ post.title }}">
         </a>
       {% endif %}
       <h2><a href="{% url 'blog:post' post.slug %}">{{ post.title }}</a></h2>
       <p>{{ post.excerpt }}</p>
       <a href="{% url 'blog:post' post.slug %}">Continuar lendo</a>
     </article>
   {% empty %}
     <p>Nenhum post encontrado.</p>
   {% endfor %}
   ```

6. **Partial de paginação simples (mostrar anterior/próxima e página atual)**

   ```django
   {% if page_object.has_other_pages %}
     {% if page_object.has_previous %}
       <a href="?page={{ page_object.previous_page_number }}">« anterior</a>
     {% endif %}

     Página {{ page_object.number }} de {{ page_object.paginator.num_pages }}

     {% if page_object.has_next %}
       <a href="?page={{ page_object.next_page_number }}">próxima »</a>
     {% endif %}
   {% endif %}
   ```

7. **Template do post (exibir conteúdo HTML com segurança)**

   ```django
   {# blog/templates/blog/post.html #}
   <h1>{{ post.title }}</h1>
   {% if post.cover and post.show_cover_in_content %}
     <img src="{{ post.cover.url }}" alt="{{ post.title }}">
   {% endif %}
   <div class="post-content">
     {{ post.content|safe }}   {# Summernote/HTML precisa de |safe #}
   </div>
   ```

8. **Prevenir erro quando não há `cover`**

   * Sempre usar `{% if post.cover %}` antes de `post.cover.url` (já mostrado acima).

9. **Teste rápido**

   * Crie/edite posts no admin.
   * Marque `is_published=True` para aparecerem.
   * Veja `/` para lista (paginação) e clique para ver o detalhe (`/post/<slug>/`).

10. **Melhorias opcionais (para evoluir depois)**

* Criar um `PublishedManager` (custom manager) para `Post.objects.published()` e evitar repetir `.filter(is_published=True)`.
* Mover `PER_PAGE` para `settings.py`.
* Implementar `get_absolute_url(self)` no `Post` para usar `{{ post.get_absolute_url }}` nos templates.

Pronto — com isso suas views já mostram posts reais com paginação, links por slug e tratamento do cover sem erros. Quer que eu gere os trechos de código já prontos para copiar/colar no seu projeto?
