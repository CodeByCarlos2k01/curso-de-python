# Passo a passo rápido — usar **um só `.env`** para Docker + Python

1. **Objetivo**
   Manter todas as configuraáveis (host, usuário, senha, DB, timezone) em um único arquivo `.env` local para não vazar segredos e facilitar alterações.

2. **Criar `.env.example` público**
   Na pasta do `docker-compose.yml` crie `.env.example` com valores de exemplo (este **vai** para o Git):

   ```
   MYSQL_HOST=localhost
   MYSQL_PORT=3306
   MYSQL_DATABASE=base_de_dados
   MYSQL_USER=usuario
   MYSQL_PASSWORD=senha
   TZ=America/Recife
   ```

3. **Criar `.env` local (não comitar)**
   Copie e preencha com seus valores reais:

   * Linux/Mac: `cp .env.example .env`
   * Windows (cmd): `copy .env.example .env`

4. **Ignorar `.env` no Git**
   Adicione no `.gitignore`:

   ```
   .env
   mysql-data/
   ```

   Se você já comitou `.env`: `git rm --cached .env && git commit -m "remove .env"`.

5. **Fazer o Docker usar o `.env`**
   No `docker-compose.yml` use `env_file`:

   ```yaml
   services:
     mysql:
       image: mysql:8
       env_file:
         - .env
       volumes:
         - ./mysql-data:/var/lib/mysql
       ports:
         - "3306:3306"
   ```

6. **No Python: instalar e carregar `.env`**

   ```bash
   pip install python-dotenv
   ```

   Código mínimo:

   ```python
   from dotenv import load_dotenv
   import os

   load_dotenv()                     # carrega .env
   HOST = os.getenv("MYSQL_HOST")
   USER = os.getenv("MYSQL_USER")
   PWD  = os.getenv("MYSQL_PASSWORD")
   DB   = os.getenv("MYSQL_DATABASE")
   ```

7. **Use as mesmas variáveis tanto no Docker quanto no código**
   Resultado: você só altera um arquivo (`.env`) e ambos (container + app) usam as mesmas configurações.

8. **Atenção ao alterar certos valores (impactos)**

   * **Mudar o nome da base (`MYSQL_DATABASE`)** pode exigir recriar o container ou remover o volume mapeado (`./mysql-data`) para que o MySQL crie a nova DB.
     Comandos úteis:

     * recriar sem perder volume: `docker compose down && docker compose up -d`
     * recriar **removendo volumes** (apaga dados): `docker compose down -v && docker compose up -d`
   * **Não apague `./mysql-data`** sem querer — é onde ficam os dados mapeados.

9. **Boas práticas finais**

   * Mantenha `.env.example` atualizado e commitado.
   * Nunca comite `.env`.
   * Documente no README: “copie `.env.example` → `.env` e preencha”.
   * Use variáveis no código via `os.getenv(...)` e evite hardcode.

10. **Checklist rápido**

* \[. ] `.env.example` no repo
* \[. ] `.env` criado localmente e ignorado pelo Git
* \[. ] `docker-compose.yml` usando `env_file: - .env`
* \[. ] `python-dotenv` instalado e `load_dotenv()` no app

Quer que eu gere para você um `.env.example` pronto ou um snippet `docker-compose.yml` já com `env_file`?
