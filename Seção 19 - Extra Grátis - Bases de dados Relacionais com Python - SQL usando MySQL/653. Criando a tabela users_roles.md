Beleza! Vou transformar essa explica√ß√£o em um **passo a passo bem simplificado e detalhado** sobre como criar a tabela de liga√ß√£o `users_roles` (ou `uso_roubos`, como foi chamada no exemplo).

---

## **Passo a passo: Criando a tabela de liga√ß√£o (`users_roles`)**

### **1. Acesse a base no DBeaver**

* Abra o **DBeaver**.
* Clique com o bot√£o direito na base de dados.
* Escolha **Criar ‚Üí Nova Tabela**.
* Nomeie a tabela como `users_roles` (ou outro nome que fa√ßa sentido para liga√ß√£o).

---

### **2. Criar as colunas**

Na nova tabela, adicione duas colunas (chaves estrangeiras):

1. **user\_id**

   * Tipo: `INT` (mesmo tipo da coluna `id` da tabela `users`).
   * Propriedades: **Not Null** (n√£o pode ficar vazio).

2. **role\_id**

   * Tipo: `INT` (mesmo tipo da coluna `id` da tabela `roles`).
   * Propriedades: **Not Null**.

‚ö†Ô∏è Importante: **n√£o marque "Auto Increment"** nessas colunas, pois elas v√£o receber valores que v√™m das tabelas `users` e `roles`.

---

### **3. Definir chave prim√°ria composta**

* V√° em **Restri√ß√µes (Constraints)**.
* Crie uma **Primary Key** com as colunas `user_id` e `role_id`.
* Isso garante que um mesmo usu√°rio n√£o receba a mesma permiss√£o duas vezes.

---

### **4. Criar chaves estrangeiras**

Agora vamos ligar cada coluna √† tabela correta:

* Para **user\_id**:

  * Referencia `users(id)`.
  * Configure a a√ß√£o:

    * **ON DELETE CASCADE** ‚Üí se o usu√°rio for apagado, apaga tamb√©m a rela√ß√£o.
    * **ON UPDATE CASCADE** ‚Üí se o id do usu√°rio mudar, atualiza aqui tamb√©m.

* Para **role\_id**:

  * Referencia `roles(id)`.
  * Configure as mesmas a√ß√µes (**CASCADE** para delete e update).

---

### **5. Salvar a tabela**

* Clique em **Salvar**.
* Agora a tabela `users_roles` aparece na lista de tabelas da base.

---

### **6. Testar a rela√ß√£o**

1. Insira dados na tabela `users_roles` ligando usu√°rios a permiss√µes.

   * Exemplo: `(user_id=4, role_id=2)`.
2. Se apagar o usu√°rio `id=4`, automaticamente o registro correspondente em `users_roles` tamb√©m ser√° apagado.
3. Se alterar o `id` do usu√°rio (com update), a mudan√ßa se reflete em `users_roles`.
4. Se tentar inserir um `role_id` que n√£o existe na tabela `roles`, o banco gera erro (garante consist√™ncia).

---

### **7. Ver o diagrama**

* No DBeaver, clique na base ‚Üí **Diagrama**.
* O programa gera automaticamente um **ERD (Diagrama de Relacionamento)** mostrando as tabelas e liga√ß√µes (`users` ‚Üî `users_roles` ‚Üî `roles`).

---

üëâ Agora voc√™ tem uma **tabela de liga√ß√£o** que conecta usu√°rios e permiss√µes de forma organizada e consistente.

---

Quer que eu fa√ßa um **mini-diagrama visual (em texto/ASCII ou imagem)** mostrando como ficam as tabelas `users`, `roles` e `users_roles` com suas rela√ß√µes?
