# Passo a passo: **Composição** (super enxuto)

1. **Definição rápida**

   * Composição = especialização da agregação: o *todo* **cria/possui** as *partes* e **quando o todo morre, as partes morrem também**.

2. **Diferença-chave**

   * **Associação**: objetos se comunicam (fraco).
   * **Agregação**: “has-a” fraco — objetos existem separadamente.
   * **Composição**: “has-a” forte — o todo **gerencia** o ciclo de vida das partes.

3. **Características práticas**

   * Partes normalmente criadas dentro do todo.
   * Partes não são compartilhadas com outros objetos.
   * Útil quando as partes não fazem sentido existir sem o todo.

4. **Como implementar (ideia)**

   * No método do todo (`inserir`, `add`) **instancie** a parte e guarde-a (lista/atributo).
   * Para agregar um objeto criado fora (não composição), forneça outro método (`inserir_externo`) — aí vira agregação.

5. **Exemplo mínimo em Python**

```python
class Endereco:
    def __init__(self, rua, numero):
        self.rua = rua
        self.numero = numero
    def __repr__(self):
        return f"Endereco({self.rua!r}, {self.numero})"
    def __del__(self):
        print(f"Apagando endereco {self.rua} {self.numero}")

class Cliente:
    def __init__(self, nome):
        self.nome = nome
        self._enderecos = []   # partes gerenciadas pelo Cliente

    # COMPOSIÇÃO: cria o Endereco dentro do Cliente
    def inserir_endereco(self, rua, numero):
        e = Endereco(rua, numero)
        self._enderecos.append(e)

    # AGREGACAO (opcional): recebe um Endereco criado fora
    def inserir_endereco_externo(self, endereco):
        self._enderecos.append(endereco)

    def listar(self):
        for e in self._enderecos:
            print(e.rua, e.numero)

    def __del__(self):
        print(f"Apagando Cliente {self.nome}")
```

6. **Uso e comportamento esperado**

```python
c = Cliente("Maria")
c.inserir_endereco("Avenida Brasil", 54)        # composição (end criado dentro)
e_ext = Endereco("Avenida Saudade", 100)
c.inserir_endereco_externo(e_ext)               # agregado externamente

c.listar()
del c                                           # ao deletar 'c', endereços internos também são liberados
print(e_ext.rua, e_ext.numero)                  # o endereco criado externamente ainda existe
```

7. **Avisos / boas práticas**

   * Não confie em `__del__` para recursos críticos (GC não é 100% determinístico).
   * Use composição quando partes **pertencem** exclusivamente ao todo.
   * Use agregação quando partes podem ser **compartilhadas** ou existirem separadamente.

8. **Resumo de bolso**

   * **Composição = todo cria/possui partes → ao apagar o todo, partes somem.**
   * Se as partes podem viver sozinhas, provavelmente é **agregação**, não composição.

Quer que eu transforme isso num diagrama simples (setas/diamante fechado) ou em um slide curto?
