Aqui está a explicação simplificada em **passo a passo** sobre como adicionar e gerenciar um **favicon** no seu `SiteSetup` com Django, incluindo validação de tamanho e redimensionamento:

---

# Passo a passo: Adicionar favicon no SiteSetup

1. **Adicionar campo de imagem no model**

   * No `SiteSetup` adicione um campo `favicon` do tipo `ImageField`:

     ```python
     favicon = models.ImageField(
         upload_to='assets/favicon/%Y/%m/',
         blank=True,
         default=''
     )
     ```
   * `upload_to`: pasta onde os arquivos serão salvos (aqui dentro de `media/assets/favicon`).
   * `blank=True` permite que o campo seja opcional.
   * `default=''` evita erro se não enviar imagem.

2. **Instalar dependência Pillow**

   * O Django precisa do Pillow para manipular imagens:

     ```txt
     pillow>=9.5.0,<9.6
     ```
   * Adicione no `requirements.txt` e execute `docker compose build` ou `pip install -r requirements.txt` no Docker para instalar.

3. **Fazer migrações do banco**

   ```bash
   python manage.py makemigrations
   python manage.py migrate
   ```

   * Isso cria a coluna `favicon` na tabela `SiteSetup`.

4. **Adicionar favicon na admin do Django**

   * Na interface administrativa, envie a imagem desejada.
   * Tamanho recomendado para favicon: **32x32 px** (ideal PNG).

5. **Garantir que a imagem exista antes de exibir**

   * No template, use verificação condicional:

     ```django
     {% if site_setup.favicon %}
         <link rel="icon" href="{{ site_setup.favicon.url }}" type="image/png">
     {% endif %}
     ```
   * Evita erro caso o usuário não tenha enviado o favicon.

6. **Redimensionar automaticamente (opcional)**

   * Para evitar imagens grandes, use Pillow para redimensionar ao salvar:

     ```python
     from PIL import Image

     def save(self, *args, **kwargs):
         super().save(*args, **kwargs)
         if self.favicon:
             img = Image.open(self.favicon.path)
             img = img.resize((32, 32))  # tamanho padrão
             img.save(self.favicon.path)
     ```
   * Coloque este método dentro do model `SiteSetup`.

7. **Usar favicon em templates**

   * Como você já registrou `SiteSetup` no context processor, pode acessar em qualquer template:

     ```django
     <link rel="icon" href="{{ site_setup.favicon.url }}" type="image/png">
     ```

---

Se você quiser, posso criar uma **versão compacta do model completo do SiteSetup**, incluindo favicon, links, título e descrição, já pronta para usar. Isso facilita bastante. Quer que eu faça?
